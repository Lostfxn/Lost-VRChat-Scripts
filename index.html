<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>Lost VRChat Tools – VPM Listing</title>

    <!-- Fluent UI web components -->
    <script
      type="module"
      src="https://unpkg.com/@fluentui/web-components"
    ></script>

    <!-- Your CSS -->
    <link rel="stylesheet" href="styles.css" />
  </head>

  <body>
    <div class="col align-items-center">
      <div class="content">
        <!-- Header -->
        <div class="mb-3 text-center">
          <h1>Lost VRchat Tools</h1>
          <div class="caption1">
            Useful tools for VRChat creators, avatar artists, and world builders.
          </div>
          <div class="caption2 mt-2">
            VPM repository managed by <strong>Lost</strong>.
          </div>
        </div>

        <!-- URL bar + Add to VCC -->
        <div class="row align-items-center mb-2 url-bar-section">
          <fluent-text-field
            id="vccListingInfoUrlField"
            class="vccUrlField"
            value="https://raw.githubusercontent.com/Lostfxn/Lost-VRChat-Scripts/main/vcc-repo.json"
            readonly
          >
          </fluent-text-field>

          <fluent-button
            id="vccAddRepoButton"
            appearance="accent"
            class="ms-2"
          >
            Add to VCC
          </fluent-button>

          <fluent-button
            id="vccListingInfoUrlFieldCopy"
            class="ms-2"
            appearance="neutral"
          >
            Copy
          </fluent-button>

          <fluent-button
            id="urlBarHelp"
            class="ms-2"
            appearance="stealth"
          >
            ?
          </fluent-button>
        </div>

        <!-- Small help dialog for URL bar -->
        <fluent-dialog
          id="addListingToVccHelp"
          hidden
        >
          <div class="col p-3">
            <h3 class="m-0 mb-2">How to add this listing to VCC</h3>
            <p class="m-0 mb-2">
              1. Open <strong>VRChat Creator Companion</strong>.<br />
              2. Go to <strong>Settings → Packages → Add Repository</strong>.<br />
              3. Paste the URL from the field above.<br />
              4. Click <strong>Add</strong>.
            </p>
            <div class="row justify-content-end mt-2">
              <fluent-button
                id="addListingToVccHelpClose"
                appearance="neutral"
              >
                Close
              </fluent-button>
            </div>
          </div>
        </fluent-dialog>

        <!-- Search -->
        <div class="searchBlock">
          <div class="root">
            <fluent-text-field
              id="searchInput"
              placeholder="Search packages…"
            >
            </fluent-text-field>
          </div>
        </div>

        <!-- Packages grid -->
        <div class="packages">
          <fluent-data-grid
            id="packageGrid"
            grid-template-columns="2fr 3.5fr 0.8fr 1.8fr"
          >
            <!-- Header row -->
            <fluent-data-grid-row row-type="header">
              <fluent-data-grid-cell grid-column="1">Name</fluent-data-grid-cell>
              <fluent-data-grid-cell grid-column="2">Description</fluent-data-grid-cell>
              <fluent-data-grid-cell grid-column="3">Type</fluent-data-grid-cell>
              <fluent-data-grid-cell grid-column="4"></fluent-data-grid-cell>
            </fluent-data-grid-row>

            <!-- Package row: Lost.HierarchyPlus -->
            <fluent-data-grid-row
              row-type="default"
              data-package-name="Lost.HierarchyPlus"
              data-package-id="com.lost.hierarchyplus"
            >
              <fluent-data-grid-cell grid-column="1">
                <div class="packageName">Lost.HierarchyPlus</div>
                <div class="caption2">com.lost.hierarchyplus</div>
              </fluent-data-grid-cell>

              <fluent-data-grid-cell grid-column="2">
                A general improvement to the Unity hierarchy with component
                icons, guide lines, row colouring and customization options.
              </fluent-data-grid-cell>

              <fluent-data-grid-cell grid-column="3">Tool</fluent-data-grid-cell>

              <fluent-data-grid-cell grid-column="4">
                <div class="row align-items-center">
                  <fluent-button
                    appearance="accent"
                    class="rowAddToVccButton"
                  >
                    Add to VCC
                  </fluent-button>
                  <fluent-button
                    appearance="stealth"
                    class="rowPackageInfoButton ms-2"
                    data-package-id="com.lost.hierarchyplus"
                  >
                    ⓘ
                  </fluent-button>
                  <fluent-button
                    appearance="stealth"
                    class="rowMenuButton ms-2"
                  >
                    …
                  </fluent-button>
                </div>
              </fluent-data-grid-cell>
            </fluent-data-grid-row>
          </fluent-data-grid>
        </div>

        <!-- Bottom link -->
        <div class="mt-3 text-center">
          <a href="#" class="link-primary">Go to Repositories</a>
        </div>
      </div>
    </div>

    <!-- Package info modal -->
    <fluent-dialog id="packageInfoModal" hidden>
      <div class="col p-3">
        <h3 id="packageInfoName" class="m-0 mb-1"></h3>
        <div id="packageInfoId" class="caption2 mb-2"></div>
        <div id="packageInfoVersion" class="caption1 mb-2"></div>

        <p id="packageInfoDescription" class="m-0 mb-2"></p>

        <p class="m-0 mb-2">
          <strong>Author:</strong>
          <a
            id="packageInfoAuthor"
            href="#"
            target="_blank"
            rel="noopener noreferrer"
          >
          </a>
        </p>

        <div class="mb-2">
          <strong>Dependencies:</strong>
          <ul id="packageInfoDependencies" class="m-0 mt-1"></ul>
        </div>

        <div class="mb-2">
          <strong>Keywords:</strong>
          <div
            id="packageInfoKeywords"
            class="row mt-1"
          ></div>
        </div>

        <div class="mb-2">
          <strong>License:</strong>
          <a
            id="packageInfoLicense"
            href="#"
            target="_blank"
            rel="noopener noreferrer"
          >
          </a>
        </div>

        <div class="mt-3">
          <div class="caption2 mb-1">
            Use this URL to add the listing directly in VCC:
          </div>
          <div class="row">
            <fluent-text-field
              id="packageInfoVccUrlField"
              class="vccUrlField"
              value="https://raw.githubusercontent.com/Lostfxn/Lost-VRChat-Scripts/main/vcc-repo.json"
              readonly
            >
            </fluent-text-field>
            <fluent-button
              id="packageInfoVccUrlFieldCopy"
              class="ms-2"
              appearance="neutral"
            >
              Copy
            </fluent-button>
          </div>
          <fluent-button
            id="packageInfoListingHelp"
            appearance="stealth"
            class="mt-2"
          >
            How do I use this in VCC?
          </fluent-button>
        </div>

        <div class="row justify-content-end mt-3">
          <fluent-button
            id="packageInfoModalClose"
            appearance="neutral"
          >
            Close
          </fluent-button>
        </div>
      </div>
    </fluent-dialog>

    <!-- Optional: empty rowMoreMenu so JS doesn't break if you add menu later -->
    <div id="rowMoreMenu" class="p-2 hidden">
      <a id="rowMoreMenuDownload" href="#">Download package</a>
    </div>

    <!-- Your JS -->
    <script type="module" src="app.js"></script>
  </body>
</html>
